{"version":3,"sources":["webpack:///src/pages/shops/shops_goods/shops_goods.vue","webpack:///./src/pages/shops/shops_goods/shops_goods.vue?db1c","webpack:///./src/pages/shops/shops_goods/shops_goods.vue"],"names":["shops_goods","name","data","scrollY","tops","shopItem","methods","_initScroll","_this","this","bscroll_esm","click","rightScroll","probeType","on","event","Math","abs","y","_initTops","topsNum","top_arr","push","topList","$refs","children","Array","prototype","slice","call","forEach","liItem","clientHeight","choosed","index","scrollTo","showFoodItem","shop","closeFoodItem","created","_this2","$store","dispatch","$nextTick","mounted","_this3","computed","extends_default","Object","vuex_esm","currentIndex","findIndex","topItem","components","cartControl","__webpack_require__","e","then","bind","shopCart","shops_goods_shops_goods","render","_vm","_h","$createElement","_c","_self","staticClass","_l","item","key","class","current","$event","attrs","src","icon","alt","_e","_v","_s","ref","directives","rawName","value","expression","description","sellCount","rating","price","oldPrice","food","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/3.2965075a88eb641c3787.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"shopGoods\">\r\n      <div class=\"left\">\r\n        <ul>\r\n          <li v-for=\"(item, index) in goods\"\r\n              :key=\"index\"\r\n              :class=\"{current: index === currentIndex}\"\r\n              @click=\"choosed(index)\">\r\n            <span class=\"items\">\r\n              <img :src=\"item.icon\"\r\n                   alt=\"\"\r\n                   v-if=\"item.icon\">\r\n              <span class=\"text\">{{item.name}}</span>\r\n            </span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div class=\"right\">\r\n        <ul ref=\"rightScroll\">\r\n          <li v-for=\"(item, index) in goods\"\r\n              :key=\"index\">\r\n            <h3 class=\"title\">\r\n              <span>{{item.name}}</span>\r\n            </h3>\r\n            <ul>\r\n              <li class=\"item_food\"\r\n                  v-for=\"(item, index) in item.foods\"\r\n                  :key=\"index\"\r\n                  @click=\"showFoodItem(item)\">\r\n                <div class=\"leftContainer\">\r\n                  <img v-lazy=\"item.icon\"\r\n                       alt=\"\">\r\n                </div>\r\n                <div class=\"rightContainer\">\r\n                  <h2>{{item.name}}</h2>\r\n                  <p class=\"text character\">{{item.description}}</p>\r\n                  <p class=\"text count\">月售{{item.sellCount}}份 <span>好评率{{item.rating}}%</span></p>\r\n                  <p class=\"price\">\r\n                    <span class=\"new\">￥{{item.price}}</span>\r\n                    <del v-if=\"item.oldPrice\"\r\n                         class=\"old\">￥{{item.oldPrice}}</del>\r\n                  </p>\r\n                  <div class=\"rightAdd\">\r\n                    <cartControl :food=\"item\"></cartControl>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <shop-cart></shop-cart>\r\n    </div>\r\n    <shop-item ref=\"shopItem\"\r\n               :shopItem=\"shopItem\"></shop-item>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex';\r\nimport BScroll from 'better-scroll';\r\nexport default {\r\n  name: 'shopGoods',\r\n  data () {\r\n    return {\r\n      scrollY: 0,\r\n      tops: [],\r\n      shopItem: {}\r\n    }\r\n  },\r\n  methods: {\r\n    // 初始化scroll\r\n    _initScroll () {\r\n      new BScroll('.left', { click: true });\r\n      this.rightScroll = new BScroll('.right', { click: true, probeType: 2 });\r\n      this.rightScroll.on('scroll', (event) => {\r\n        this.scrollY = Math.abs(event.y);\r\n      });\r\n      this.rightScroll.on('scrollEnd', (event) => {\r\n        this.scrollY = Math.abs(event.y);\r\n      })\r\n    },\r\n    // 初始化每一个li距离顶部的距离\r\n    _initTops () {\r\n      let topsNum = 0;\r\n      let top_arr = [];\r\n      top_arr.push(topsNum);\r\n      let topList = this.$refs.rightScroll.children;\r\n      Array.prototype.slice.call(topList).forEach(liItem => {\r\n        topsNum += liItem.clientHeight;\r\n        top_arr.push(topsNum);\r\n      });\r\n      this.tops = top_arr;\r\n    },\r\n    choosed (index) {\r\n      const scrollY = this.tops[index];\r\n      // 右侧实时滚动\r\n      this.rightScroll.scrollTo(0, -scrollY, 300);\r\n      this.scrollY = scrollY;\r\n    },\r\n    // 显示shopItem\r\n    showFoodItem (shop) {\r\n      this.shopItem = shop;\r\n      this.$refs.shopItem.closeFoodItem();\r\n    }\r\n  },\r\n  created () {\r\n    this.$store.dispatch('getShopGoods', () => {\r\n      this.$nextTick(() => {\r\n        this._initTops();\r\n      });\r\n    })\r\n  },\r\n  mounted () {\r\n    this.$store.dispatch('getShopGoods', () => {\r\n      this.$nextTick(() => {\r\n        this._initScroll();\r\n        this._initTops();\r\n      });\r\n    })\r\n  },\r\n  computed: {\r\n    ...mapState([\r\n      'goods'\r\n    ]),\r\n    currentIndex () {\r\n      let { scrollY, tops } = this;\r\n      const index = tops.findIndex((topItem, index) => {\r\n        return scrollY >= topItem && scrollY < tops[index + 1];\r\n      })\r\n      return index;\r\n    }\r\n  },\r\n  components: {\r\n    'cartControl': () => import('@/components/cartControl/CartControl.vue'),\r\n    'shopItem': () => import('@/components/shopItem/shopItem'),\r\n    'shopCart': () => import('@/components/shopCart/shopCart')\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\">\r\n@import '~@/commons/stylus/mixin.styl'\r\n.shopGoods\r\n  display flex\r\n  position absolute\r\n  top 194px\r\n  bottom 46px\r\n  width 100%\r\n  background #fff\r\n  overflow hidden\r\n  .left\r\n    width 80px\r\n    background #f3f5f7\r\n    ul\r\n      > li\r\n        text-align center\r\n        position relative\r\n        &.current\r\n          color $green\r\n          font-weight bold\r\n          background #fff\r\n          border none\r\n          .items\r\n            border none\r\n        .items\r\n          width 54px\r\n          height 56px\r\n          line-height 56px\r\n          display inline-block\r\n          border-bottom 1px rgba(7, 17, 27, 0.1) solid\r\n        img\r\n          width 12px\r\n          height 12px\r\n          vertical-align middle\r\n        .text\r\n          font-size 13px\r\n          vertical-align middle\r\n  .right\r\n    width calc(100% - 80px)\r\n    .title\r\n      height 26px\r\n      line-height 26px\r\n      border-left 2px solid #d9dde1\r\n      font-size 12px\r\n      color rgb(147, 153, 159)\r\n      background #f3f5f7\r\n      padding-left 12px\r\n    .item_food\r\n      padding-bottom 14px\r\n      margin 15px 15px 0\r\n      display flex\r\n      bottom-border-px(2px, #e4e4e4, 0)\r\n      .leftContainer\r\n        margin-right 10px\r\n        img\r\n          width 60px\r\n          height 60px\r\n      .rightContainer\r\n        h2\r\n          font-size 13px\r\n        p.character, p.count\r\n          margin 5px 0\r\n        p.text\r\n          color $tip\r\n          font-size 10px\r\n        p.price\r\n          .new\r\n            color red\r\n            font-size 14px\r\n          .old\r\n            color $tip\r\n            font-size 10px\r\n        .rightAdd\r\n          position absolute\r\n          right 0\r\n          bottom 2px\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/shops/shops_goods/shops_goods.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"shopGoods\"},[_c('div',{staticClass:\"left\"},[_c('ul',_vm._l((_vm.goods),function(item,index){return _c('li',{key:index,class:{current: index === _vm.currentIndex},on:{\"click\":function($event){return _vm.choosed(index)}}},[_c('span',{staticClass:\"items\"},[(item.icon)?_c('img',{attrs:{\"src\":item.icon,\"alt\":\"\"}}):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(item.name))])])])}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('ul',{ref:\"rightScroll\"},_vm._l((_vm.goods),function(item,index){return _c('li',{key:index},[_c('h3',{staticClass:\"title\"},[_c('span',[_vm._v(_vm._s(item.name))])]),_vm._v(\" \"),_c('ul',_vm._l((item.foods),function(item,index){return _c('li',{key:index,staticClass:\"item_food\",on:{\"click\":function($event){return _vm.showFoodItem(item)}}},[_c('div',{staticClass:\"leftContainer\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.icon),expression:\"item.icon\"}],attrs:{\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"rightContainer\"},[_c('h2',[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('p',{staticClass:\"text character\"},[_vm._v(_vm._s(item.description))]),_vm._v(\" \"),_c('p',{staticClass:\"text count\"},[_vm._v(\"月售\"+_vm._s(item.sellCount)+\"份 \"),_c('span',[_vm._v(\"好评率\"+_vm._s(item.rating)+\"%\")])]),_vm._v(\" \"),_c('p',{staticClass:\"price\"},[_c('span',{staticClass:\"new\"},[_vm._v(\"￥\"+_vm._s(item.price))]),_vm._v(\" \"),(item.oldPrice)?_c('del',{staticClass:\"old\"},[_vm._v(\"￥\"+_vm._s(item.oldPrice))]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"rightAdd\"},[_c('cartControl',{attrs:{\"food\":item}})],1)])])}),0)])}),0)]),_vm._v(\" \"),_c('shop-cart')],1),_vm._v(\" \"),_c('shop-item',{ref:\"shopItem\",attrs:{\"shopItem\":_vm.shopItem}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-993c47ea\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/shops/shops_goods/shops_goods.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"minimize\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-993c47ea\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./shops_goods.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./shops_goods.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./shops_goods.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-993c47ea\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./shops_goods.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/shops/shops_goods/shops_goods.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}